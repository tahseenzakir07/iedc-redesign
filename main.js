const content = {
    logos: {
        navLogo: "RSET IEDC- Home/imgi_1_rset_ innovation.png",
        iedcColor: "RSET IEDC- Home/imgi_10_iedc.png",
        iedcWhite: "RSET IEDC- Home/imgi_8_RSET IEDC White.png",
        rset: "RSET IEDC- Home/imgi_9_rset.png"
    },
    hero: {
        headline: ["THINK.", "INNOVATE.", "INSPIRE."],
        subheadline: "WE ARE RSET IEDC",
        description: "At RSET IEDC, we nurture students interested in establishing their startups and aim to ignite their entrepreneurial spirit right here at the campus at Rajagiri School of Engineering and Technology. The Innovation and development center (IEDC) not only acts as a facilitator that shapes students' ideas but also serves as a platform to showcase their skills.",
        stats: [
            { label: "Members", value: "3000+" },
            { label: "Events", value: "200+" },
            { label: "IPL Winners", value: "2021" },
            { label: "IEDC Summit Host", value: "2023" }
        ],
        video: "269048353-8262d5a4-bf6a-4325-85ac-351e3f4808e9.mp4"
    },
    about: {
        title: "Building Young Student Entrepreneurs",
        vision: "To be a self-sustained TBI catering to the needs of young student entrepreneurs with innovative ideas of social relevance and thereby introducing a culture of entrepreneurship inside campus which will strengthen our education system and thereby promoting the national economical and social growth.",
        mission: "To develop an ecosystem with required infrastructure that can enable students and faculty to innovate and prototype their potential ideas with industrial standards and support from Government, industry and reputed academic institutions around the world and help them to realize their potentials.",
        headerBg: "RSET IEDC- Home/imgi_2_about-1.jpeg",
        objectives: [
            { title: "Foster Innovation", description: "Design and develop innovative products of social relevance.", icon: "ðŸ’¡" },
            { title: "Encourage Entrepreneurship", description: "Create entrepreneurial culture among faculty members, students and Alumni.", icon: "ðŸš€" },
            { title: "Provide Entrepreneurial Support", description: "Support other institutions around RSET to mold and effectively carry out entrepreneurial activities in their campus.", icon: "ðŸ¤" },
            { title: "Increase Representation of Women", description: "Encourage and facilitate the involvement of women in entrepreneurial endeavors.", icon: "ðŸ‘©â€ðŸ’»" },
            { title: "More Startups", description: "Promote start-up initiatives from Faculty and Students.", icon: "ðŸ“ˆ" },
            { title: "Build Individuals", description: "Prepare students to finish their engineering studies equipped with all the entrepreneurial skills necessary to thrive in their future pursuits.", icon: "ðŸ› ï¸" }
        ]
    },
    gallery: [
        "RSET IEDC- Home/imgi_12_carousel-1.jpg",
        "RSET IEDC- Home/imgi_3_gallery1.jpg",
        "RSET IEDC- Home/imgi_7_gallery2.jpg",
        "RSET IEDC- Home/imgi_4_gallery3.jpg",
        "RSET IEDC- Home/imgi_5_gallery4.jpg",
        "RSET IEDC- Home/imgi_6_gallery5.jpg"
    ],
    execom: {
        title: "Executive Committee '25 - '26",
        headerBg: "RSET IEDC- Team/imgi_35_team-header.jpg",
        faculty: [
            { name: "Mr. Nitheesh Kurian", role: "Nodal Officer", image: "RSET IEDC- Team/imgi_2_Nitheesh.jpg" },
            { name: "Ms. Anu Maria Joykutty", role: "Assistant Nodal Officer", image: "RSET IEDC- Team/imgi_3_Anu.jpg" }
        ],
        studentLeads: [
            { name: "Sarath Menon Girish", role: "Student Lead - IEDC", image: "RSET IEDC- Team/imgi_4_sarath.jpg" },
            { name: "Anwyl Jolly", role: "Student Lead - IIC", image: "RSET IEDC- Team/imgi_5_anwyl.jpg" },
            { name: "Fathima Moonam Kandathil", role: "Student Co-Lead", image: "RSET IEDC- Team/imgi_6_fathima.jpg" }
        ],
        departments: [
            {
                name: "Quality & Operations",
                members: [
                    { name: "Shwetha O S", role: "Lead - IEDC", image: "RSET IEDC- Team/imgi_7_shwetha.jpg" },
                    { name: "Suseela V K", role: "Lead - IIC", image: "RSET IEDC- Team/imgi_8_suseela.jpg" },
                    { name: "Alan Johnson", role: "Co-Lead - IEDC", image: "RSET IEDC- Team/imgi_9_alanjohnson.jpg" },
                    { name: "John Prince", role: "Co-Lead - IEDC", image: "RSET IEDC- Team/imgi_10_john.jpg" },
                    { name: "Amy Reni Varghese", role: "Co-Lead - IIC", image: "RSET IEDC- Team/imgi_11_amy.jpg" }
                ]
            },
            {
                name: "Incubation & Startup Affairs",
                members: [
                    { name: "Jeslyn Mariam Yohannan", role: "Lead", image: "RSET IEDC- Team/imgi_12_jeslyn.jpg" },
                    { name: "Joshua Faithson Rony", role: "Co-Lead", image: "RSET IEDC- Team/imgi_13_joshua.jpg" }
                ]
            },
            {
                name: "Technology",
                members: [
                    { name: "Abraham Manoj Madamana", role: "Lead", image: "RSET IEDC- Team/imgi_14_abraham.jpg" },
                    { name: "Sebastian Robin", role: "Co-Lead", image: "RSET IEDC- Team/imgi_15_sebastian.jpg" }
                ]
            },
            {
                name: "PR & Media",
                members: [
                    { name: "Neha George", role: "Lead", image: "RSET IEDC- Team/imgi_16_neha.jpg" },
                    { name: "Abdallah R H Khan", role: "Co-Lead", image: "RSET IEDC- Team/imgi_17_abdallah.jpg" },
                    { name: "Alan Issac George", role: "Co-Lead", image: "RSET IEDC- Team/imgi_18_alanissac.jpg" }
                ]
            },
            {
                name: "PR & Branding",
                members: [
                    { name: "Amit Shibu", role: "Lead", image: "RSET IEDC- Team/imgi_19_amit.jpg" },
                    { name: "Vyshnav A K", role: "Co-Lead", image: "RSET IEDC- Team/imgi_20_vyshnav.jpg" },
                    { name: "Daya Mariya Winny", role: "Co-Lead", image: "RSET IEDC- Team/imgi_21_daya.jpg" }
                ]
            },
            {
                name: "Community",
                members: [
                    { name: "P S Ashna Parveen", role: "Lead", image: "RSET IEDC- Team/imgi_22_psashna.jpg" },
                    { name: "Nevin John George", role: "Co-Lead", image: "RSET IEDC- Team/imgi_23_nevin.jpg" }
                ]
            },
            {
                name: "Finance",
                members: [{ name: "Reshma Jacob", role: "Lead", image: "RSET IEDC- Team/imgi_24_reshma.jpg" }]
            },
            {
                name: "Documentation",
                members: [
                    { name: "Alen George Scaria", role: "Lead - IEDC", image: "RSET IEDC- Team/imgi_25_alen.jpg" },
                    { name: "Diya P Varghese", role: "Lead - IIC", image: "RSET IEDC- Team/imgi_26_diya.jpg" },
                    { name: "Giribala Arun", role: "Co-Lead - IEDC", image: "RSET IEDC- Team/imgi_27_giribala.jpg" },
                    { name: "Rishi Krishna", role: "Co-Lead - IIC", image: "RSET IEDC- Team/imgi_28_rishi.jpg" }
                ]
            },
            {
                name: "Women in Innovation",
                members: [
                    { name: "Nandha Biju", role: "Lead", image: "RSET IEDC- Team/imgi_29_nandha.jpg" },
                    { name: "Sheba Reji", role: "Co-Lead", image: "RSET IEDC- Team/imgi_30_sheba.jpg" }
                ]
            }
        ]
    },
    reports: {
        headerBg: "RSET IEDC- Home/imgi_12_carousel-1.jpg",
        items: [
            { year: "2024'25", title: "Annual Activity Report", url: "Annual Report 2024'25.pdf" },
            { year: "2023'24", title: "Annual Activity Report", url: "Annual Report 2023'24.pdf" },
            { year: "2022'23", title: "Annual Activity Report", url: "Annual Report 2022'23.pdf" },
            { year: "2021'22", title: "Annual Activity Report", url: "Annual Report 2021'22.pdf" }
        ]
    },
    contact: {
        address: "RSET Innovation and Entrepreneurship Development Centre (IEDC), 2nd Floor, PG Block, RSET, Kakkanad.",
        email: "rsetiedc@rajagiritech.edu.in",
        phone: "+91 94974 13879",
        nodalOfficer: "Mr. Nitheesh Kurian",
        socials: [
            { name: "Instagram", url: "https://www.instagram.com/rsetiedc/", icon: "fa-brands fa-instagram" },
            { name: "LinkedIn", url: "https://in.linkedin.com/company/rset-iedc", icon: "fa-brands fa-linkedin" },
            { name: "Threads", url: "https://www.threads.net/@rsetiedc", icon: "fa-brands fa-threads" },
            { name: "YouTube", url: "https://www.youtube.com/channel/UCVzfXE9R2PBBDJyJmPwSyQQ", icon: "fa-brands fa-youtube" },
            { name: "Facebook", url: "https://www.facebook.com/iedc.rset", icon: "fa-brands fa-facebook" }
        ]
    }
};

document.addEventListener('DOMContentLoaded', () => {
    const path = window.location.pathname;
    const fileName = path.split("/").pop().split("?")[0].split("#")[0];
    const page = fileName || 'index.html';

    initGlobalUI();

    const pageMap = {
        'index.html': renderHome,
        'about.html': renderAbout,
        'team.html': renderTeam,
        'reports.html': renderReports,
        'contact.html': renderContact
    };

    if (pageMap[page]) pageMap[page]();
    else if (page === '') renderHome();

    if (page === 'index.html' || page === '') {
        animateSlogan();
    }

    setTimeout(initAnimations, 100);
});

function initGlobalUI() {
    const mainLogo = document.getElementById('main-logo');
    if (mainLogo) mainLogo.src = content.logos.navLogo;

    const footerLogoIEDC = document.getElementById('footer-logo-iedc');
    if (footerLogoIEDC) footerLogoIEDC.src = content.logos.iedcColor;
    const footerLogoIEDCWhite = document.getElementById('footer-logo-iedc-white');
    if (footerLogoIEDCWhite) footerLogoIEDCWhite.src = content.logos.iedcWhite;
    const footerLogoRSET = document.getElementById('footer-logo-rset');
    if (footerLogoRSET) footerLogoRSET.src = content.logos.rset;

    const footerSocials = document.getElementById('footer-socials');
    if (footerSocials) {
        footerSocials.innerHTML = content.contact.socials.map(s => `
            <a href="${s.url}" target="_blank" title="${s.name}"><i class="${s.icon}"></i></a>
        `).join('');
    }
}

function animateSlogan() {
    const spans = document.querySelectorAll('.staggered-headline span');
    spans.forEach((span, index) => {
        setTimeout(() => {
            span.classList.add('active');
        }, 400 * index + 200); // Slight initial delay for pop effect
    });
}

function initAnimations() {
    const observerOptions = {
        threshold: 0.1,
        rootMargin: "0px 0px -50px 0px"
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('active');
            }
        });
    }, observerOptions);

    document.querySelectorAll('.reveal').forEach(el => {
        observer.observe(el);
        const rect = el.getBoundingClientRect();
        if (rect.top < window.innerHeight && rect.bottom > 0) {
            el.classList.add('active');
        }
    });
}

function renderHome() {
    const heroDesc = document.getElementById('hero-desc');
    if (heroDesc) heroDesc.innerText = content.hero.description;

    const aboutPreviewImg = document.getElementById('about-preview-img');
    if (aboutPreviewImg) aboutPreviewImg.src = content.about.headerBg;

    const galleryPreviewImg = document.getElementById('gallery-preview-img');
    if (galleryPreviewImg) galleryPreviewImg.src = content.gallery[0];

    const statsContainer = document.getElementById('hero-stats');
    if (statsContainer) {
        statsContainer.innerHTML = content.hero.stats.map(s => `
            <div style="margin-bottom: 2rem;">
                <h3 class="gradient-text" style="font-size: 3.5rem; font-weight: 950;">${s.value}</h3>
                <p class="card-text">${s.label}</p>
            </div>
        `).join('');
    }

    const mainGrid = document.querySelector('.bento-grid');
    if (mainGrid) {
        // Skip the ones already used (0)
        content.gallery.slice(1).forEach((imgSrc, i) => {
            const card = document.createElement('section');
            card.className = `bento-card ${i % 2 === 0 ? 'span-4' : 'span-8'} reveal`;
            card.innerHTML = `<img class="bento-img" src="${imgSrc}">`;
            mainGrid.appendChild(card);
        });
    }
}

function renderAbout() {
    const header = document.querySelector('.page-header');
    if (header) header.style.backgroundImage = `url('${content.about.headerBg}')`;

    const visionText = document.getElementById('vision-text');
    if (visionText) visionText.innerText = content.about.vision;
    const missionText = document.getElementById('mission-text');
    if (missionText) missionText.innerText = content.about.mission;

    const grid = document.getElementById('objectives-grid');
    if (grid) {
        grid.innerHTML = content.about.objectives.map(o => `
            <div class="bento-card span-4 reveal" style="padding: 2rem;">
                <div style="font-size: 2.5rem; margin-bottom: 1rem;">${o.icon}</div>
                <h3 style="font-size: 1.4rem; margin-bottom: 0.5rem;">${o.title}</h3>
                <p style="font-size: 0.95rem; color: var(--text-secondary);">${o.description}</p>
            </div>
        `).join('');
    }
}

function renderTeam() {
    const header = document.querySelector('.page-header');
    if (header) header.style.backgroundImage = `url('${content.execom.headerBg}')`;

    const teamContent = document.getElementById('team-content');
    if (!teamContent) return;

    let html = renderTeamSection("Faculty", content.execom.faculty);
    html += renderTeamSection("Core Leads", content.execom.studentLeads);
    content.execom.departments.forEach(dept => {
        html += renderTeamSection(dept.name, dept.members);
    });

    teamContent.innerHTML = html;
}

function renderTeamSection(title, members) {
    return `
        <div class="reveal" style="margin-bottom: 5rem;">
            <h2 class="gradient-text" style="padding: 0 4rem; margin-bottom: 3rem;">${title}</h2>
            <div class="team-layout">
                ${members.map(m => `
                    <div class="team-card reveal">
                        <img src="${m.image || ''}" alt="${m.name}" class="team-img" onerror="this.src='https://via.placeholder.com/160?text=${m.name}'">
                        <h4 style="font-size: 1.3rem; margin-bottom: 0.5rem;">${m.name}</h4>
                        <p style="font-size: 0.8rem; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.15em;">${m.role}</p>
                    </div>
                `).join('')}
            </div>
        </div>
    `;
}

function renderReports() {
    const header = document.querySelector('.page-header');
    if (header) header.style.backgroundImage = `url('${content.reports.headerBg}')`;

    const grid = document.getElementById('reports-grid');
    if (grid) {
        grid.innerHTML = content.reports.items.map(r => `
            <section class="bento-card span-6 reveal">
                <h2 class="card-title">${r.year}</h2>
                <p class="card-text">${r.title}</p>
                <a href="${r.url}" target="_blank" class="gradient-text" style="display: block; margin-top: 2rem; font-weight: 800; text-decoration: none;">DOWNLOAD â†’</a>
            </section>
        `).join('');
    }
}

function renderContact() {
    const addr = document.getElementById('contact-address');
    if (addr) addr.innerText = content.contact.address;

    const details = document.getElementById('contact-details');
    if (details) {
        details.innerHTML = `
            <p style="margin-bottom: 1rem;">Email: ${content.contact.email}</p>
            <p style="margin-bottom: 1rem;">Nodal Officer: ${content.contact.nodalOfficer}</p>
            <p>Phone: ${content.contact.phone}</p>
        `;
    }

    const fullSocials = document.getElementById('full-socials');
    if (fullSocials) {
        fullSocials.innerHTML = content.contact.socials.map(s => `
            <a href="${s.url}" target="_blank" title="${s.name}"><i class="${s.icon}"></i></a>
        `).join('');
    }
}
